version: "3.9"

services:
  # btcusd:
  #     build:
  #       context: .
  #     container_name: btcusd
  #     volumes:
  #       - ./market/BTCUSD/coinbase.key:/app/coinbase.key.json
  #       - ./market/BTCUSD/config.json:/app/config.json
  #       - ./market/BTCUSD/pycryptobot.log:/app/pycryptobot.log
  #       - ./market/BTCUSD/graphs:/app/graphs
  #       #- /etc/localtime:/etc/localtime:ro
  #     environment:
  #       - PYTHONUNBUFFERED=1
  #     deploy:
  #       restart_policy:
  #         condition: on-failure

  # I THINK each service is a bot
  adausd:
      build:
        context: .
      container_name: adausd
      volumes:
      - ./market/ADAUSD/coinbasepro.key:/app/coinbasepro.key
      - ./market/ADAUSD/config.json:/app/config.json
      - ./market/ADAUSD/pycryptobot.log:/app/pycryptobot.log
      - ./market/ADAUSD/graphs:/app/graphs
      environment:
        - PYTHONUNBUFFERED=1
      # deploy:
      #   restart_policy:
      #     condition: no

  # ethusd:
  #     build:
  #       context: .
  #     container_name: ethusd
  #     volumes:
  #     - ./market/ETHUSD/coinbase.key:/app/coinbase.key.json
  #     - ./market/ETHUSD/config.json:/app/config.json
  #     - ./market/ETHUSD/pycryptobot.log:/app/pycryptobot.log
  #     - ./market/ETHUSD/graphs:/app/graphs
  #     environment:
  #       - PYTHONUNBUFFERED=1
  #     deploy:
  #       restart_policy:
  #         condition: on-failure

# Bot can also be setup to use Scanner/Screener with this block
    # pycryptobot:
    #     image: ghcr.io/whittlem/pycryptobot/pycryptobot:latest
    #     container_name: pycryptobot
    #     volumes:
    #         - ./market/binance.key:/app/keys/binance.key:ro
    #         - ./market/config.json:/app/config.json
    #         - ./market/pycryptobot.log:/app/pycryptobot.log
    #         - ./market/screener.json:/app/screener.json
    #         - ./market:/app/telegram_data
    #         - ./market/graphs:/app/graphs
    #         - /etc/timezone:/etc/timezone:ro
    #         - /etc/localtime:/etc/localtime:ro
    #     environment:
    #         - PYTHONUNBUFFERED=1
    #     entrypoint: ["python3", "-u", "telegram_bot.py"]
    #     restart: always


#  Different markets can be specified as below
#
#  BTCEUR:
#    build:
#      context: .
#    container_name: BTCEUR
#    volumes:
#      - ./market/BTCEUR/config.json:/app/config.json
#      - ./market/BTCEUR/pycryptobot.log:/app/pycryptobot.log
#      - ./market/BTCEUR/graphs:/app/graphs
#      - /etc/localtime:/etc/localtime:ro
#    environment:
#      - PYTHONUNBUFFERED=1
#    deploy:
#      restart_policy:
#        condition: on-failure
#
#  ETHEUR:
#    build:
#      context: .
#    container_name: ETHEUR
#    volumes:
#      - ./market/ETHEUR/config.json:/app/config.json
#      - ./market/ETHEUR/pycryptobot.log:/app/pycryptobot.log
#      - ./market/ETHEUR/graphs:/app/graphs
#      - /etc/localtime:/etc/localtime:ro
#    environment:
#      - PYTHONUNBUFFERED=1
#    deploy:
#      restart_policy:
#        condition: on-failure
#
# Uncomment to build and run Web Portal
#  pycrypto-websvc:
#      build:
#        context: .
#        dockerfile: Dockerfile-websvc
#      container_name: pycrypto-websvc
#      volumes:
#        - ./market/:/app/market
#        - /etc/localtime:/etc/localtime:ro
#      ports:
#        - 5000:5000
#      environment:
#        - PYTHONUNBUFFERED=1
#      deploy:
#        restart_policy:
#          condition: on-failure
